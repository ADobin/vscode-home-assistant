{"type":"object","properties":{"id":{"type":"string"},"alias":{"type":"string"},"initial_state":{"type":"boolean"},"hide_entity":{"type":"boolean"},"trigger":{"anyOf":[{"$ref":"#/definitions/HaTrigger"},{"$ref":"#/definitions/SunTrigger"},{"$ref":"#/definitions/TimeTrigger"},{"$ref":"#/definitions/TemplateTrigger"},{"$ref":"#/definitions/WebhookTrigger"},{"$ref":"#/definitions/EventTrigger"},{"$ref":"#/definitions/TimePatternTrigger"},{"$ref":"#/definitions/MqttTrigger"},{"$ref":"#/definitions/GeoLocationTrigger"},{"$ref":"#/definitions/StateTrigger"},{"$ref":"#/definitions/ZoneTrigger"},{"$ref":"#/definitions/NumericStateTrigger"},{"type":"array","items":{"anyOf":[{"$ref":"#/definitions/HaTrigger"},{"$ref":"#/definitions/SunTrigger"},{"$ref":"#/definitions/TimeTrigger"},{"$ref":"#/definitions/TemplateTrigger"},{"$ref":"#/definitions/WebhookTrigger"},{"$ref":"#/definitions/EventTrigger"},{"$ref":"#/definitions/TimePatternTrigger"},{"$ref":"#/definitions/MqttTrigger"},{"$ref":"#/definitions/GeoLocationTrigger"},{"$ref":"#/definitions/StateTrigger"},{"$ref":"#/definitions/ZoneTrigger"},{"$ref":"#/definitions/NumericStateTrigger"}]}}]},"condition":{"anyOf":[{"$ref":"#/definitions/NumericStateConditionSchema"},{"$ref":"#/definitions/StateConditionSchema"},{"$ref":"#/definitions/SunConditionSchema"},{"$ref":"#/definitions/TemplateConditionSchema"},{"$ref":"#/definitions/TimeConditionSchema"},{"$ref":"#/definitions/ZoneConditionSchema"},{"$ref":"#/definitions/AndConditionSchema"},{"$ref":"#/definitions/OrConditionSchema"},{"type":"array","items":{"anyOf":[{"$ref":"#/definitions/NumericStateConditionSchema"},{"$ref":"#/definitions/StateConditionSchema"},{"$ref":"#/definitions/SunConditionSchema"},{"$ref":"#/definitions/TemplateConditionSchema"},{"$ref":"#/definitions/TimeConditionSchema"},{"$ref":"#/definitions/ZoneConditionSchema"},{"$ref":"#/definitions/AndConditionSchema"},{"$ref":"#/definitions/OrConditionSchema"}]}}]},"action":{"anyOf":[{"$ref":"#/definitions/Action"},{"type":"array","items":{"$ref":"#/definitions/Action"}}]}},"required":["action","trigger"],"definitions":{"HaTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["homeassistant"]},"event":{"enum":["shutdown","start"],"type":"string"}},"required":["event","platform"]},"SunTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["sun"]},"event":{"enum":["sunrise","sunset"],"type":"string"},"offset":{"type":"string"}},"required":["event","platform"]},"TimeTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["time"]},"at":{"type":"string"}},"required":["at","platform"]},"TemplateTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["template"]},"value_template":{"type":"string"}},"required":["platform","value_template"]},"WebhookTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["webhook"]},"webhook_id":{"type":"string"}},"required":["platform","webhook_id"]},"EventTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["event"]},"event_type":{"type":"string"},"event_data":{}},"required":["event_type","platform"]},"TimePatternTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["time_pattern"]},"hours":{"type":"string"},"minutes":{"type":["string","number"]},"seconds":{"type":["string","number"]}},"required":["platform"]},"MqttTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["mqtt"]},"topic":{"type":"string"},"payload":{"type":"string"},"encoding":{"type":"string"}},"required":["platform","topic"]},"GeoLocationTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["geo_location"]},"source":{"type":"string"},"zone":{"type":"string"},"event":{"enum":["enter","leave"],"type":"string"}},"required":["event","platform","source","zone"]},"StateTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["state"]},"entity_id":{"type":"string"},"from":{"type":["string","boolean"]},"to":{"type":["string","boolean"]},"for":{"anyOf":[{"$ref":"#/definitions/StateTriggerFor"},{"type":"string"}]}},"required":["entity_id","platform"]},"StateTriggerFor":{"type":"object","properties":{"days":{"type":["string","number"]},"hours":{"type":["string","number"]},"minutes":{"type":["string","number"]},"seconds":{"type":["string","number"]},"milliseconds":{"type":["string","number"]}}},"ZoneTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["zone"]},"entity_id":{"type":"string"},"zone":{"type":"string"},"event":{"enum":["enter","leave"],"type":"string"}},"required":["entity_id","event","platform","zone"]},"NumericStateTrigger":{"type":"object","properties":{"platform":{"type":"string","enum":["numeric_state"]},"entity_id":{"type":"string"},"below":{"type":"string"},"above":{"type":"string"},"value_template":{"type":"string"},"for":{"type":"string"}},"required":["entity_id","platform"]},"NumericStateConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["numeric_state"]},"entity_id":{"type":"string"},"below":{"type":"number"},"above":{"type":"number"},"value_template":{"type":"string"}},"required":["above","below","condition","entity_id"]},"StateConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["state"]},"entity_id":{"type":"string"},"state":{"type":"string"},"for":{"type":"string"},"from":{"type":"string"}},"required":["condition","entity_id","state"]},"SunConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["sun"]},"before":{"type":"string"},"before_offset":{"type":"string"},"after":{"type":"string"},"after_offset":{"type":"string"}},"required":["condition"]},"TemplateConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["template"]},"value_template":{"type":"string"}},"required":["condition"]},"TimeConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["time"]},"before":{"type":"string"},"after":{"type":"string"},"weekday":{"enum":["fri","mon","sat","sun","thu","tue","wed"],"type":"string"}},"required":["condition"]},"ZoneConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["zone"]},"entity_id":{"type":"string"},"zone":{"type":"string"}},"required":["condition","entity_id"]},"AndConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["and"]},"conditions":{"anyOf":[{"$ref":"#/definitions/NumericStateConditionSchema"},{"$ref":"#/definitions/StateConditionSchema"},{"$ref":"#/definitions/SunConditionSchema"},{"$ref":"#/definitions/TemplateConditionSchema"},{"$ref":"#/definitions/TimeConditionSchema"},{"$ref":"#/definitions/ZoneConditionSchema"},{"$ref":"#/definitions/AndConditionSchema"},{"$ref":"#/definitions/OrConditionSchema"},{"type":"array","items":{"anyOf":[{"$ref":"#/definitions/NumericStateConditionSchema"},{"$ref":"#/definitions/StateConditionSchema"},{"$ref":"#/definitions/SunConditionSchema"},{"$ref":"#/definitions/TemplateConditionSchema"},{"$ref":"#/definitions/TimeConditionSchema"},{"$ref":"#/definitions/ZoneConditionSchema"},{"$ref":"#/definitions/AndConditionSchema"},{"$ref":"#/definitions/OrConditionSchema"}]}}]}},"required":["condition","conditions"]},"OrConditionSchema":{"type":"object","properties":{"condition":{"type":"string","enum":["or"]},"conditions":{"anyOf":[{"$ref":"#/definitions/NumericStateConditionSchema"},{"$ref":"#/definitions/StateConditionSchema"},{"$ref":"#/definitions/SunConditionSchema"},{"$ref":"#/definitions/TemplateConditionSchema"},{"$ref":"#/definitions/TimeConditionSchema"},{"$ref":"#/definitions/ZoneConditionSchema"},{"$ref":"#/definitions/AndConditionSchema"},{"$ref":"#/definitions/OrConditionSchema"},{"type":"array","items":{"anyOf":[{"$ref":"#/definitions/NumericStateConditionSchema"},{"$ref":"#/definitions/StateConditionSchema"},{"$ref":"#/definitions/SunConditionSchema"},{"$ref":"#/definitions/TemplateConditionSchema"},{"$ref":"#/definitions/TimeConditionSchema"},{"$ref":"#/definitions/ZoneConditionSchema"},{"$ref":"#/definitions/AndConditionSchema"},{"$ref":"#/definitions/OrConditionSchema"}]}}]}},"required":["condition","conditions"]},"Action":{"type":"object","properties":{"service":{"type":"string"},"data":{}},"required":["service"]}},"$schema":"http://json-schema.org/draft-07/schema#"}